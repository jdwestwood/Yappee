<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Patent visualization</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen">
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js"></script>
    <script src="http://code.jquery.com/jquery.js"></script>
    <script src="/js/jquery.cookie-1.4.0.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/underscore.js"></script>
    <script src="/js/moment.min.js"></script>
    <script src="/js/d3.v3.min.js" charset="utf-8"></script>
<!--  <script src="/js/innersvg.js" charset="utf-8"></script> to be able to set '.innerHTML' (or '.innerSVG') on SVG elements -->
    <link rel="stylesheet" href="/css/jdwmainpage.css">
  </head>

  <body>
    <ul class="nav nav-tabs" id="topTabs">
      <li class="active">
	<a id="patMap" href="#Map" data-toggle="tab">Map</a>
      </li>
      <li>
	<a id="gAdvSearchForm" href="#Search" data-toggle="tab">Search</a>
      </li>
    </ul>

    <div class="tab-content" id="topTabsContent">
      <div class="tab-pane active" id="Map">
        <div class="top-content">
          <div class="top-force-container">
            <div class="top-force-left">
              <div class="yappee-logo">
                <svg class="yappee-graphic" width="305" height="80">
                </svg>
              </div>
              <!-- load javascript for yappee graphic -->
              <script src="scripts/map_page/yappee_graphic.js" type="text/javascript"></script>
              <div class="input-group patent-input">
                <span class="input-group-addon">Map:</span>
                <div>
                  <input type="text" class="form-control input-patent" placeholder="Patent/App. number" spellcheck="false">
                  <div class="patent-input-error"></div>
                </div>
                <span class="input-group-addon btn-go">Go!</span>
              </div>
              <div class="btn-group btn-group-left">
                <button type="button" class="btn btn-default btn-random">Random</button>
                <button type="button" class="btn btn-default btn-fun">Fun</button>
              </div>
            </div>
            <div class="top-force-right">
              <div class="btn-group btn-group-right">
                <button type="button" class="btn btn-default btn-undo" disabled="true">Undo</button>
                <button type="button" class="btn btn-default btn-clear" disabled="true">Clear</button>
              </div>
            </div>
          </div>
          <div class="top-patent-lists">
          </div>
        </div>
        <div class="main-content">
          <div class="force-container">
            <div class="status-line">
              <span class="status-line-type">Fetching </span>patents <span class="status-line-queries">0/5</span> tasks done
            </div>
            <div class="mouse-mode-line" title="Shift-click on plot to change modes">
              <span class="mouse-mode-state">Normal</span> mode</div>
            <div class="bib-container">
            </div>
            <svg class="main-svg">
              <defs>
                <!-- svg for the mapped patent cross graphic for a node on the forcePatent map -->
                <g id="force-mapped-cross-def" clip-path="url(#nodeClip)">
                  <rect class="force-mapped-cross" width="20" height="5" transform="translate(-10,-2.5)"></rect>
                  <rect class="force-mapped-cross" width="5" height="20" transform="translate(-2.5,-10)"></rect>
                </g>
    
                <!-- svg for the favorite patent symbol for a node on the forcePatent map -->
                <g id="force-favorite-heart-def" transform="translate(0,8)">
                  <g class="force-favorite-heart" transform="rotate(-135)">
                    <rect height="8" width="10" transform="translate(0,0)"></rect>
                    <circle r="4" transform="translate(10,4)"></circle>
                  </g>
                  <g class="force-favorite-heart" transform="rotate(-45)">
                    <rect height="8" width="10" transform="translate(0,-8)"></rect>
                    <circle r="4" transform="translate(10,-4)"></circle>
                  </g>
                </g>
                <!-- svg for the clipPaths for the top buttons 'Bring To Front', 'Send To Back', and 'Full/Popup' -->
                <ClipPath id="leftBtn">
                  <rect x="-11px" y="-11px" width="21px" height="22px"></rect>
                </clipPath>
                <ClipPath id="midBtn">
                  <rect x="-10px" y="-11px" width="20px" height="22px"></rect>
                </clipPath>
                <ClipPath id="rightBtn">
                  <rect x="-10px" y="-11px" width="21px" height="22px"></rect>
                </clipPath>
              </defs
            </svg>
          </div>
          <!-- load javascript for initial force map -->
          <script src="/scripts/map_page/force_map_create.js" type="text/javascript" charset="utf-8"></script>
          <div class="patent-lists">
            <div class="patent-list" data-listname="mapped">
              <div class="patent-list-header">Mapped</div>
              <div class="patent-list-patents">
                <!-- HTML from script id 'mapped-list-entry-section' for each patent in the list goes here -->
              </div>
            </div>
            <div class="patent-list" data-listname="favorites">
              <div class="patent-list-header">Favorites</div>
              <div class="patent-list-patents">
                <!-- HTML from script id 'favorites-list-entry-section' for each patent in the list goes here -->
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="tab-pane" id="Search">
        <iframe id="gps" src="" width="1050" height="700" scrolling="no" allowfullscreen="true"
                sandbox="allow-same-origin allow-top-navigation allow-forms allow-scripts">
	</iframe>
      </div>
    </div>

    <script id="advanced-patent-search-style" type="text/template">    <!-- loads in iframe of advanced patent search page -->
      <!-- import styles for the header on the advanced patent search page -->
      <style type="text/css">
        @import url("/css/jdwadvancedpatentsearch.css");
        @import url("/css/jdwpageheader.css");
      </style>
    </script>

    <!-- part of replacement header for advanced patent search page -->
    <script id="advanced-patent-search" type="text/template">
      <span class="advanced-patent-search-header">Advanced Patent Search</span>
    </script>

    <!-- load script to finish setting up the Map page -->
    <script src="/scripts/map_page/map_page_complete.js" type="text/javascript"></script>

    <!-- load script to setup Google Advanced Patent Search page -->
    <script src="/scripts/search_form_page/advanced_patent_search.js" type="text/javascript"></script>

    <!-- load script handling setup of buttons, popovers, and events as each tab is created -->
    <script src="/scripts/tabs/tab_setup.js" type="text/javascript"></script>

    <!-- load script for the PatentPicker and RandomPatentPicker classes associated with the Go, Random, and
         Fun buttons on the Map page -->
    <script src="/scripts/map_page/patent_pickers.js" type="text/javascript"></script>
    <script src="/scripts/related_page/related_setup.js" type="text/javascript"></script>
    <script src="/scripts/search_page/search_setup.js" type="text/javascript"></script>
    <script src="/scripts/patent_page/patent_setup.js" type="text/javascript"></script>
    <script src="/scripts/shared/shared_google.js" type="text/javascript"></script>
    <script src="/scripts/shared/map_fav_buttons.js" type="text/javascript"></script>
    <script src="/scripts/map_page/force_map_content.js" type=""></script>


    <script id="customize-bootstrap-styles" type="text/template">    <!-- will load in main window -->
      <!-- import style for popovers on search, patent, and prior art pages -->
      <style type="text/css">
        @import url("/css/jdwpopovers.css");
        @import url("/css/jdwbuttons.css");
      </style>
    </script>

    <!-- html for adding the '+' and 'heart' (add and favorite) buttons to the Google related art page
         piggy back off of the Google css class 'hide-result-btn' for the 'x' that hides a patent;
         edit the /patents/related/static/icons.png file and add +' and 'heart' icons; (this file has many icons);
         save as iconsJDW and serve from the /css directory on my server; we select which icon to use by setting
         the position, height, and width of the background css parameter. -->
    <script id="related-art-page-button-content" type="text/template">
      <span class="hide-result-btn btn-favorite-add" title="Add to favorites"></span>
      <span class="hide-result-btn btn-map-add" title="Add to patent map"></span>
    </script>

    <script id="search-page-button-content" type="text/template">
      <span class="hide-result-btn btn-hide-add" title="Hide"></span>
      <span class="hide-result-btn btn-favorite-add" title="Add to favorites"></span>
      <span class="hide-result-btn btn-map-add" title="Add to patent map"></span>
    </script>

    <script id="search-page-unhide-results" type="text/template">
      <div class="hidden-results-info hidden-show-all">
        <span class="hidden-results-message">0 result hidden below.</span>
        <span class="hidden-results-clear-btn">Show all</span>
      </div>
    </script>

    <script id="prior-art-popover-title" type="text/template">
      Prior art for <%= patent_no %>:<br><span class="popover-subtitle jdwprior"><%- patent_title %></span>
    </script>

    <script id="prior-art-popover-content" type="text/template">
      <table id="jdw20">
        <tbody id="jdw21">
          <tr>
            <td class="jdw22">Search terms:</td>
            <td class="jdw23" id="jdw-pop-search-terms"><%= searchTerms %></td>
          </tr>
          <tr>
            <td class="jdw22">Start date:</td>
            <td class="jdw23" id="jdw-pop-start-date"><%= startDate %></td>
          </tr>
          <tr>
            <td class="jdw22">End date:</td>
            <td class="jdw23" id="jdw-pop-end-date"><%= endDate %></td>
          </tr>
        </tbody>
      </table>
    </script>

    <script id="patent-info-popover" type="text/template">
      <table id="jdw20">
        <tbody id="jdw21">
          <tr>
            <td class="jdw22">Inventors:</td>
            <td class="jdw23"><%= inventors %></td>
          </tr>
          <tr>
            <td class="jdw22">Assignee:</td>
            <td class="jdw23"><%= assignee %></td>
          </tr>
        </tbody>
      </table>
    </script>
   
    <script id="search-term-popover" type="text/template">            <!-- will load in main window -->
      <table id="jdw14">
        <tbody>
          <tr>
            <td class="tcell"><%- t1 %></td>
            <td class="vcell"><%- v1 %></td>
            <td class="tcell"><%- t5 %></td>
            <td class="vcell"><%- v5 %></td>
            <td class="tcell"><%- t9 %></td>
            <td class="vcell"><%- v9 %></td>
            <td class="tcell"><%- t13 %></td>
            <td class="vcell"><%- v13 %></td>
          </tr>
          <tr>
            <td class="tcell"><%- t2 %></td>
            <td class="vcell"><%- v2 %></td>
            <td class="tcell"><%- t6 %></td>
            <td class="vcell"><%- v6 %></td>
            <td class="tcell"><%- t10 %></td>
            <td class="vcell"><%- v10 %></td>
            <td class="tcell"><%- t14 %></td>
            <td class="vcell"><%- v14 %></td>
          </tr>
          <tr>
            <td class="tcell"><%- t3 %></td>
            <td class="vcell"><%- v3 %></td>
            <td class="tcell"><%- t7 %></td>
            <td class="vcell"><%- v7 %></td>
            <td class="tcell"><%- t11 %></td>
            <td class="vcell"><%- v11 %></td>
            <td class="tcell"><%- t15 %></td>
            <td class="vcell"><%- v15 %></td>
          </tr>
          <tr>
            <td class="tcell"><%- t4 %></td>
            <td class="vcell"><%- v4 %></td>
            <td class="tcell"><%- t8 %></td>
            <td class="vcell"><%- v8 %></td>
            <td class="tcell"><%- t12 %></td>
            <td class="vcell"><%- v12 %></td>
            <td class="tcell"><%- t16 %></td>
            <td class="vcell"><%- v16 %></td>
          </tr>
        </tbody>
      </table>
    </script>

    <!-- tweek formating of Gooooogle span so it disappears.  Will load in iframe of search pages -->
    <script id="search-page-more-results-style" type="text/template">
      <style type="text/css">
        @import url("/css/jdwsearchresultpage.css");
      </style>
    </script>

    <!-- loads in iframe of search, patent, related, and hidden related pages -->
    <script id="search-term-table-style" type="text/template">
      <!-- import styles for:
             inserted Map and Favorites buttons
             customized page header
             animation trick to get the prior art div.r's to load properly -->
      <style type="text/css">
        @import url("/css/jdwbuttons.css");
        @import url("/css/jdwpageheader.css");
        @import url("/css/jdwpriorartpage.css");
      </style>
    </script>

    <!-- replacement header for google advanced patent search, search result, related result, and patent pages -->
    <script id="page-header" type="text/template">
      <div id="jdw-top">
        <span id="jdw-top-row">
          <span class="jdw-google">
            <!-- get google logo with this span -->
            <span class="jdw-google-logo">
              <span class="jdw-google-logo1"></span>
            </span>
            </div>
          </span>
        </span>
      </div>
    </script>

    <!-- header for prior art page -->
    <script id="prior-art-table" type="text/template">                  <!-- will load in prior art iframe -->
      <div id="jdw30" class="gbt">
        <h2 id="jdw31">Prior art for <%= patent_no %></h2>
      </div>
    </script>

    <!-- search term table -->
    <script id="search-term-table" type="text/template">                <!-- will load in iframe -->
      <div id="jdw1">
        <div id="jdw2">
          <table>
            <tbody>
              <tr>
                <td><b>Search terms:</b></td>
              </tr>
            </tbody>
          </table>
        </div>
        <div id="jdw3" class="gbt">
          <table id="jdw4">
            <tbody>
              <tr>
                <td class="tcell"><%- t1 %></td>
                <td class="vcell"><%- v1 %></td>
                <td class="tcell"><%- t5 %></td>
                <td class="vcell"><%- v5 %></td>
                <td class="tcell"><%- t9 %></td>
                <td class="vcell"><%- v9 %></td>
                <td class="tcell"><%- t13 %></td>
                <td class="vcell"><%- v13 %></td>
              </tr>
              <tr>
                <td class="tcell"><%- t2 %></td>
                <td class="vcell"><%- v2 %></td>
                <td class="tcell"><%- t6 %></td>
                <td class="vcell"><%- v6 %></td>
                <td class="tcell"><%- t10 %></td>
                <td class="vcell"><%- v10 %></td>
                <td class="tcell"><%- t14 %></td>
                <td class="vcell"><%- v14 %></td>
              </tr>
              <tr>
                <td class="tcell"><%- t3 %></td>
                <td class="vcell"><%- v3 %></td>
                <td class="tcell"><%- t7 %></td>
                <td class="vcell"><%- v7 %></td>
                <td class="tcell"><%- t11 %></td>
                <td class="vcell"><%- v11 %></td>
                <td class="tcell"><%- t15 %></td>
                <td class="vcell"><%- v15 %></td>
              </tr>
              <tr>
                <td class="tcell"><%- t4 %></td>
                <td class="vcell"><%- v4 %></td>
                <td class="tcell"><%- t8 %></td>
                <td class="vcell"><%- v8 %></td>
                <td class="tcell"><%- t12 %></td>
                <td class="vcell"><%- v12 %></td>
                <td class="tcell"><%- t16 %></td>
                <td class="vcell"><%- v16 %></td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </script>

    <!-- scripts for inserting a Bootstrap tab and tab content-->
    <script id="bs_tab-pane" type="text/template">
      <div class="tab-pane" id="<%= tab_content_id %>">
        <iframe class="gps_result" id="<%= iframe_id %>" width="<%= iframe_width %>" height="<%= iframe_height %>" allowfullscreen="true" sandbox="allow-same-origin allow-top-navigation allow-forms allow-scripts" onerror="console.log('Error loading iframe');">
        </iframe>
      </div>
    </script>

    <script id="bs_nav-tab" type="text/template">
      <li>
        <a id="<%= tab_id %>" href="#<%= tab_content_id %>" data-toggle="tab" data-tabname="<%= tab_name %>">
          <span><%= tab_name %></span>
          <div class="tb">
            <button class="close close-tab" type="button" onclick="tabPopoverManager.deleteTab(event)">&times;</button>
          </div>
        </a>
      </li>
    </script>

    <!-- script for adding the Map and Favorites buttons to patent tabs -->
    <script id="tab-buttons" type="text/template">
       <div class="tb tb-left">
          <span class="hide-result-btn btn-map-add" title="Add to patent map"></span>
          <span class="hide-result-btn btn-favorite-add" title="Add to favorites"></span>
       </div>
    </script>

    <!-- script for templating a patent entry in the Mapped patent list -->
    <!-- variables are patent_no -->
    <script id="mapped-list-entry-section" type="text/template">
      <div class="patent-list-entry" data-patent="<%= patent_no %>">
        <div class="patent-list-patent-nav-area">
          <div class="patent-list-dropdown-arrow"></div>
        </div>
        <div class="patent-list-patent-container">
          <!-- HTML from script id 'patent-list-patent-section' for the patent goes here -->
          <!-- HTML from script id 'patent-list-reference-section' for its cited patents goes here -->
          <!-- HTML from script id 'patent-list-reference-section' for its citing patents goes here -->
          <!-- HTML from script id 'patent-list-reference-section' for its related patents goes here -->
        </div>
      </div>
    </script>

    <!-- script for templating a patent entry in the Favorites patent list -->
    <!-- variables are patent_no -->
    <script id="favorites-list-entry-section" type="text/template">
      <div class="patent-list-entry" data-patent="<%= patent_no %>">
        <div class="patent-list-patent-container">
          <!-- HTML from script id 'patent-list-patent-section' for the patent goes here -->
        </div>
      </div>
    </script>

    <!-- script for templating a patent biblio in a patent list -->
    <!-- variables are patent_no, patent_label, source_patent, title, file_date; set source_patent = patent_no
    <!-- if patent_no is a Mapped patent or a Favorite patent -->
    <script id="patent-list-patent-section" type="text/template">
      <div class="patent-list-patent" data-patent="<%= patent_no %>" data-source-patent="<%= source_patent %>">
        <div class="patent-list-patent-main">
          <div class="patent-list-patent-biblio">
            <div class="patent-list-patent-row">
              <div class="patent-list-patent-number">
                <a class="pop1-patent-url" href="/patents/<%= patent_no %>"><%= patent_label %></a>
              </div>
              <div class="patent-list-patent-buttons">
                <span class="hide-result-btn btn-map-add" title="Add to patent map" data-patent="<%= patent_no %>"></span>
                <span class="hide-result-btn btn-favorite-add" title="Add to favorites" data-patent="<%= patent_no %>"></span>
                <span class="hide-result-btn btn-hide-add" title="Delete from map" data-patent="<%= patent_no %>"></span>
              </div>
              <div class="patent-list-patent-date">
                <div>Appl: <%= file_date %></div>
              </div>
            </div>
            <div class="patent-list-patent-title"><%= title %></div>
          </div>
        </div>
        <div class="patent-list-fullview-button" title="Full view" data-patent="<%= patent_no %>" data-querying="false">
          <div class="patent-list-fullview-container"></div>
          <div class="patent-list-full-rect"></div>
        </div>
      </div>
    </script

    <!-- script for templating a citations section under a patent in a patent list -->
    <!-- variables are patent_no, citation_type ('cited', 'citing', or 'related'), citation_no (number of citations)
    <!-- and citation_heading -->
    <script id="patent-list-reference-section" type="text/template">
      <!-- Firefox requires function definitions before function usage; Chrome does not -->
      <% function dropdownArrowHTML(patent_no) {
        // add HTML for the dropdown arrow if a citations list has entries
        return '<div class="citation-list-dropdown-arrow" data-patent="' + patent_no + '"></div>';
         } %>
      <div class="patent-list-references patent-list-<%= citation_type %>-patents" data-patent="<%= patent_no %>" data-citation-type="<%= citation_type %>">
        <div class="patent-list-patent-nav-area patent-list-<%= citation_type %>-nav-area">
          <%= (citation_no > 0) ? dropdownArrowHTML(patent_no) : "" %>
        </div>
        <div class="patent-list-citation-container">
          <div class="patent-list-citation-heading patent-list-<%= citation_type %>-heading"><%= citation_heading %> 
            (<span class="patent-list-citation-mapped">0</span>&nbsp;mapped;&nbsp;
             <span class="patent-list-citation-deleted">0</span>&nbsp;deleted)
          </div>
          <div class="patent-list-subpatent-container">
            <!-- HTML from script id 'patent-list-patent-section' for each citation_type patent goes here -->
          </div>
        </div>
      </div>
    </script>

    <!-- script for templating the biblio popup on the force maps -->
    <!-- variables are patent_no, patent_label, file_date, pub_date, title, inventors, assignee, and abstract -->
    <script src="/scripts/templates/templates.js" type="text/javascript"></script>

    <script src="/scripts/map_page/top_buttons.js" type="text/javascript"></script>
    <script src="/scripts/map_page/map_fav_lists.js" type="text/javascript"></script>
    <script src="/scripts/map_page/force_map_biblios.js" type="text/javascript"></script>
    <script src="/scripts/map_page/force_map_legend.js" type="text/javascript"></script>
    <script src="/scripts/map_page/force_map_behavior.js" type="text/javascript"></script>
    <script src="/scripts/map_page/force_map_EPO_data.js" type="text/javascript"></script>
  </body>
</html>
